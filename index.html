<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snakes & Ladders</title>
    <link rel="icon" type="image/jpeg" href="./favicon1.jpeg">
    <style>
        :root {
            --primary: #3a86ff;
            --secondary: #ff006e;
            --accent: #8338ec;
            --light: #ffbe0b;
            --dark: #1a1a2e;
            --board-bg: #f8f9fa;
            --text: #333;
            --text-light: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--dark), #16213e);
            color: var(--text-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
            height: 100vh;
        }

        .game-container {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0; /* Important for flex children */
        }

        .controls-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-height: 0; /* Important for flex children */
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        h1 {
            font-size: 2rem;
            background: linear-gradient(to right, var(--light), var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }

        .board-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 0; /* Important for flex children */
        }

        .board {
            width: 100%;
            max-width: 600px;
            aspect-ratio: 1 / 1;
            background-color: var(--board-bg);
            border-radius: 10px;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
            gap: 2px;
            padding: 5px;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .cell {
            background: white;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            color: var(--text);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .cell.ladder-start {
            background: linear-gradient(135deg, #a8e6cf, #6ecb9f);
        }

        .cell.ladder-end {
            background: linear-gradient(135deg, #6ecb9f, #2e8b57);
        }

        .cell.snake-head {
            background: linear-gradient(135deg, #ff9a9e, #f5576c);
        }

        .cell.snake-tail {
            background: linear-gradient(135deg, #f5576c, #c2185b);
        }

        .player {
            position: absolute;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.3);
            transition: all 0.5s ease;
            z-index: 5;
        }

        .player-1 {
            background: var(--primary);
            border: 2px solid #1e6fd9;
        }

        .player-2 {
            background: var(--secondary);
            border: 2px solid #d9005a;
        }

        .game-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .mode-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: var(--primary);
        }

        .reset-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: var(--secondary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #e00063;
        }

        .game-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .player-status {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
        }

        .player-1-status, .player-2-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .current-player {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .dice-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--text);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dice:hover {
            transform: scale(1.05);
        }

        .dice.rolling {
            animation: roll 0.5s ease-in-out infinite;
        }

        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1.05); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .roll-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .roll-btn:hover {
            background: #6a2cce;
            transform: translateY(-3px);
        }

        .roll-btn:active {
            transform: translateY(1px);
        }

        .roll-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }

        .game-log {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            font-size: 0.9rem;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 5px 10px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
        }

        .support-section {
            background: linear-gradient(90deg, #fff7ed, #fff1e6);
            color: #1f2937;
            padding: 15px;
            border-radius: 10px;
        }

        .support-title {
            font-weight: 800;
            margin-bottom: 10px;
        }

        .support-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .till-number {
            font-weight: 900;
            font-size: 20px;
        }

        .copy-btn {
            background: #f59e0b;
            padding: 8px 12px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            font-weight: 800;
        }

        .rules-section ul {
            margin-left: 20px;
            margin-top: 10px;
        }

        .rules-section li {
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .orientation-notice {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 100;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
        }

        .orientation-notice.show {
            display: flex;
        }

        .orientation-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            animation: rotate 2s infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(90deg); }
        }

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                padding: 10px;
                gap: 15px;
                height: auto;
                min-height: 100vh;
            }
            
            .game-container, .controls-container {
                min-height: auto;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .board {
                max-width: 100%;
            }
            
            .cell {
                font-size: 0.7rem;
            }
            
            .player {
                width: 20px;
                height: 20px;
                font-size: 0.7rem;
            }
            
            .dice {
                width: 70px;
                height: 70px;
            }
            
            .game-controls {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.6rem;
            }
            
            .cell {
                font-size: 0.6rem;
            }
            
            .player {
                width: 18px;
                height: 18px;
            }
            
            .dice {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .roll-btn {
                padding: 10px 20px;
                font-size: 1rem;
            }
            
            .mode-btn, .reset-btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }

        /* Orientation detection */
        @media (max-height: 500px) and (orientation: landscape) {
            .orientation-notice {
                display: flex;
            }
            
            body {
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- First Container: Game Board and Controls -->
        <div class="game-container">
            <div class="card">
                <div class="game-header">
                    <div>
                        <h1>Snakes & Ladders</h1>
                        <p class="subtitle">Roll the dice and race to the finish!</p>
                    </div>
                    <div class="game-controls">
                        <button class="mode-btn active" id="twoPlayerBtn">Two Players</button>
                        <button class="mode-btn" id="onePlayerBtn">vs Computer</button>
                        <button class="reset-btn" id="resetBtn">Reset Game</button>
                    </div>
                </div>
                
                <div class="board-area">
                    <div class="board" id="gameBoard">
                        <!-- Board will be generated with JavaScript -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Second Container: Game Info, Controls, Support, and Rules -->
        <div class="controls-container">
            <div class="card game-info">
                <div class="player-status">
                    <div class="player-1-status">
                        <div class="player-icon player-1">P1</div>
                        <span>Player 1: <span id="player1Pos">0</span></span>
                    </div>
                    <div class="player-2-status">
                        <div class="player-icon player-2">P2</div>
                        <span>Player 2: <span id="player2Pos">0</span></span>
                    </div>
                </div>
                
                <div class="current-player" id="currentPlayer">
                    Player 1's Turn
                </div>
                
                <div class="dice-container">
                    <div class="dice" id="dice">-</div>
                    <button class="roll-btn" id="rollBtn">Roll Dice</button>
                </div>
            </div>
            
            <div class="card game-log" id="gameLog">
                <div class="log-entry">Game started! Player 1 goes first.</div>
            </div>
            
            <div class="card support-section">
                <div class="support-title">Support Us (M-Pesa)</div>
                <div class="support-content">
                    <div>
                        <div style="font-size:13px">Till number</div>
                        <div class="till-number">4713786</div>
                    </div>
                    <div><button id="copyBtn" class="copy-btn">Copy</button></div>
                </div>
                <div style="font-size:12px;color:#111">Use Lipa na M-Pesa → Pay Bill/Till → enter till number and amount.</div>
            </div>
            
            <div class="card rules-section">
                <div style="font-weight:800">Rules & Notes</div>
                <ul>
                    <li>Roll 1–6, move forward square by square.</li>
                    <li>If you land at bottom of ladder, climb to its top.</li>
                    <li>If you land on a snake head, slide to its tail.</li>
                    <li>First player to reach square 100 wins!</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="orientation-notice" id="orientationNotice">
        <div class="orientation-icon">🔄</div>
        <h2>Rotate Your Device</h2>
        <p>For the best experience, please rotate your device to portrait mode.</p>
    </div>

    <script>
        // Game state
        const gameState = {
            players: [
                { position: 0, isComputer: false },
                { position: 0, isComputer: false }
            ],
            currentPlayer: 0,
            gameMode: 'twoPlayer', // 'twoPlayer' or 'onePlayer'
            gameActive: true,
            snakes: {
                16: 6, 47: 26, 49: 11, 56: 53, 62: 19, 64: 60, 87: 24, 93: 73, 95: 75, 98: 78
            },
            ladders: {
                1: 38, 4: 14, 9: 31, 21: 42, 28: 84, 36: 44, 51: 67, 71: 91, 80: 100
            }
        };

        // DOM elements
        const gameBoard = document.getElementById('gameBoard');
        const player1Pos = document.getElementById('player1Pos');
        const player2Pos = document.getElementById('player2Pos');
        const currentPlayerEl = document.getElementById('currentPlayer');
        const diceEl = document.getElementById('dice');
        const rollBtn = document.getElementById('rollBtn');
        const gameLog = document.getElementById('gameLog');
        const twoPlayerBtn = document.getElementById('twoPlayerBtn');
        const onePlayerBtn = document.getElementById('onePlayerBtn');
        const resetBtn = document.getElementById('resetBtn');
        const copyBtn = document.getElementById('copyBtn');
        const orientationNotice = document.getElementById('orientationNotice');

        // Initialize the game
        function initGame() {
            createBoard();
            updatePlayerPositions();
            updateUI();
            
            // Event listeners
            rollBtn.addEventListener('click', rollDice);
            twoPlayerBtn.addEventListener('click', () => setGameMode('twoPlayer'));
            onePlayerBtn.addEventListener('click', () => setGameMode('onePlayer'));
            resetBtn.addEventListener('click', resetGame);
            copyBtn.addEventListener('click', () => {
                navigator.clipboard.writeText('4713786');
                alert('Till number copied to clipboard!');
            });
            
            // Orientation detection
            window.addEventListener('resize', checkOrientation);
            window.addEventListener('orientationchange', checkOrientation);
            checkOrientation();
        }

        // Create the game board
        function createBoard() {
            gameBoard.innerHTML = '';
            
            // Create 100 cells in a snake pattern
            for (let i = 100; i >= 1; i--) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.textContent = i;
                cell.id = `cell-${i}`;
                
                // Add special classes for snakes and ladders
                if (gameState.snakes[i]) {
                    cell.classList.add('snake-head');
                } else if (Object.values(gameState.snakes).includes(i)) {
                    cell.classList.add('snake-tail');
                } else if (gameState.ladders[i]) {
                    cell.classList.add('ladder-start');
                } else if (Object.values(gameState.ladders).includes(i)) {
                    cell.classList.add('ladder-end');
                }
                
                gameBoard.appendChild(cell);
            }
            
            // Create player tokens
            const player1 = document.createElement('div');
            player1.className = 'player player-1';
            player1.id = 'player1';
            player1.textContent = 'P1';
            gameBoard.appendChild(player1);
            
            const player2 = document.createElement('div');
            player2.className = 'player player-2';
            player2.id = 'player2';
            player2.textContent = 'P2';
            gameBoard.appendChild(player2);
            
            updatePlayerPositions();
        }

        // Update player positions on the board
        function updatePlayerPositions() {
            const player1 = document.getElementById('player1');
            const player2 = document.getElementById('player2');
            
            if (player1 && player2) {
                const cell1 = document.getElementById(`cell-${gameState.players[0].position || 1}`);
                const cell2 = document.getElementById(`cell-${gameState.players[1].position || 1}`);
                
                if (cell1 && cell2) {
                    const rect1 = cell1.getBoundingClientRect();
                    const rect2 = cell2.getBoundingClientRect();
                    const boardRect = gameBoard.getBoundingClientRect();
                    
                    // Position player 1 slightly to the left of center
                    player1.style.left = `${rect1.left - boardRect.left + rect1.width * 0.3}px`;
                    player1.style.top = `${rect1.top - boardRect.top + rect1.height * 0.5}px`;
                    
                    // Position player 2 slightly to the right of center
                    player2.style.left = `${rect2.left - boardRect.left + rect1.width * 0.7}px`;
                    player2.style.top = `${rect2.top - boardRect.top + rect1.height * 0.5}px`;
                }
            }
            
            // Update position displays
            player1Pos.textContent = gameState.players[0].position;
            player2Pos.textContent = gameState.players[1].position;
        }

        // Roll the dice
        function rollDice() {
            if (!gameState.gameActive) return;
            
            // Disable roll button during animation
            rollBtn.disabled = true;
            diceEl.classList.add('rolling');
            
            // Simulate dice rolling
            let rolls = 0;
            const rollInterval = setInterval(() => {
                diceEl.textContent = Math.floor(Math.random() * 6) + 1;
                rolls++;
                
                if (rolls > 10) {
                    clearInterval(rollInterval);
                    
                    // Final roll
                    const roll = Math.floor(Math.random() * 6) + 1;
                    diceEl.textContent = roll;
                    diceEl.classList.remove('rolling');
                    
                    // Process the move
                    setTimeout(() => processMove(roll), 500);
                }
            }, 100);
        }

        // Process player move
        function processMove(roll) {
            const player = gameState.currentPlayer;
            const newPosition = gameState.players[player].position + roll;
            
            // Add log entry
            addLog(`Player ${player + 1} rolled a ${roll}`);
            
            // Check if player wins
            if (newPosition === 100) {
                gameState.players[player].position = 100;
                updatePlayerPositions();
                endGame(player);
                return;
            }
            
            // Check if player exceeds 100
            if (newPosition > 100) {
                addLog(`Player ${player + 1} cannot move beyond 100`);
                switchPlayer();
                return;
            }
            
            // Move player
            gameState.players[player].position = newPosition;
            updatePlayerPositions();
            
            // Check for snakes or ladders
            setTimeout(() => {
                if (gameState.snakes[newPosition]) {
                    const tailPosition = gameState.snakes[newPosition];
                    addLog(`Player ${player + 1} slid down a snake to ${tailPosition}`);
                    gameState.players[player].position = tailPosition;
                    updatePlayerPositions();
                } else if (gameState.ladders[newPosition]) {
                    const topPosition = gameState.ladders[newPosition];
                    addLog(`Player ${player + 1} climbed a ladder to ${topPosition}`);
                    gameState.players[player].position = topPosition;
                    updatePlayerPositions();
                }
                
                // Switch to next player
                switchPlayer();
            }, 1000);
        }

        // Switch to next player
        function switchPlayer() {
            gameState.currentPlayer = (gameState.currentPlayer + 1) % 2;
            updateUI();
            
            // If it's computer's turn in one player mode
            if (gameState.gameMode === 'onePlayer' && 
                gameState.players[gameState.currentPlayer].isComputer && 
                gameState.gameActive) {
                setTimeout(() => rollDice(), 1500);
            }
        }

        // Update UI based on game state
        function updateUI() {
            currentPlayerEl.textContent = `Player ${gameState.currentPlayer + 1}'s Turn`;
            currentPlayerEl.style.background = gameState.currentPlayer === 0 ? 
                'rgba(58, 134, 255, 0.3)' : 'rgba(255, 0, 110, 0.3)';
            
            // Enable roll button if it's human player's turn
            if (gameState.gameMode === 'twoPlayer' || 
                (gameState.gameMode === 'onePlayer' && !gameState.players[gameState.currentPlayer].isComputer)) {
                rollBtn.disabled = false;
            }
        }

        // Set game mode
        function setGameMode(mode) {
            gameState.gameMode = mode;
            
            if (mode === 'twoPlayer') {
                twoPlayerBtn.classList.add('active');
                onePlayerBtn.classList.remove('active');
                gameState.players[0].isComputer = false;
                gameState.players[1].isComputer = false;
                addLog("Game mode: Two Players");
            } else {
                onePlayerBtn.classList.add('active');
                twoPlayerBtn.classList.remove('active');
                gameState.players[0].isComputer = false;
                gameState.players[1].isComputer = true;
                addLog("Game mode: Player vs Computer");
            }
            
            resetGame();
        }

        // End the game
        function endGame(winner) {
            gameState.gameActive = false;
            addLog(`Player ${winner + 1} wins the game!`);
            currentPlayerEl.textContent = `Player ${winner + 1} Wins!`;
            currentPlayerEl.style.background = winner === 0 ? 
                'rgba(58, 134, 255, 0.7)' : 'rgba(255, 0, 110, 0.7)';
            rollBtn.disabled = true;
        }

        // Reset the game
        function resetGame() {
            gameState.players[0].position = 0;
            gameState.players[1].position = 0;
            gameState.currentPlayer = 0;
            gameState.gameActive = true;
            
            gameLog.innerHTML = '<div class="log-entry">Game started! Player 1 goes first.</div>';
            diceEl.textContent = '-';
            
            updatePlayerPositions();
            updateUI();
        }

        // Add entry to game log
        function addLog(message) {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = message;
            gameLog.appendChild(logEntry);
            gameLog.scrollTop = gameLog.scrollHeight;
        }

        // Check device orientation
        function checkOrientation() {
            if (window.innerHeight < 500 && window.innerWidth > window.innerHeight) {
                orientationNotice.classList.add('show');
            } else {
                orientationNotice.classList.remove('show');
            }
        }

        // Initialize the game when page loads
        window.addEventListener('load', initGame);
    </script>
</body>
</html>
