<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Snakes & Ladders â€” Neon Edition</title>
<link rel="icon" type="image/png" href="./favicon.png">
<style>
:root {
  --bg1: #040b1a;
  --bg2: #0a1226;
  --accent-blue: #3b82f6;
  --accent-red: #ef4444;
  --glass: rgba(255,255,255,0.05);
}
* { box-sizing: border-box; }
html, body {
  height: 100%;
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at center, var(--bg1), var(--bg2));
  color: #e8f0ff;
  overflow: hidden;
}
.wrapper {
  display: flex;
  width: 100vw;
  height: 100vh;
  flex-wrap: wrap;
}
.container-board {
  flex: 3;
  min-width: 60%;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(145deg, #050d23, #070f29);
  position: relative;
}
.container-controls {
  flex: 1;
  min-width: 320px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  background: linear-gradient(180deg, #0c162f, #050c1a);
  padding: 15px;
  box-shadow: inset 0 0 20px rgba(255,255,255,0.05);
  border-left: 2px solid rgba(255,255,255,0.1);
}
.board {
  position: relative;
  width: 90%;
  max-width: 720px;
  aspect-ratio: 1 / 1;
  border-radius: 12px;
  overflow: hidden;
  border: 3px solid rgba(255,255,255,0.1);
  box-shadow: 0 0 30px rgba(0,0,0,0.6);
}
.board img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  display: block;
}
.grid {
  position: absolute;
  inset: 0;
  display: grid;
  grid-template-columns: repeat(10,1fr);
  grid-template-rows: repeat(10,1fr);
  pointer-events: none;
}
.token {
  position: absolute;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 800;
  border: 2px solid white;
  transform: translate(-50%,-50%);
  transition: top .4s, left .4s;
}
.token.blue { background: var(--accent-blue); }
.token.red { background: var(--accent-red); }
.controls {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
button {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.1);
  color: white;
  border-radius: 8px;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.3s;
}
button:hover { background: rgba(255,255,255,0.15); }
.dice {
  width: 100px;
  height: 100px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 14px;
  font-size: 28px;
  font-weight: 900;
  border: 3px solid rgba(255,255,255,0.08);
  cursor: pointer;
  transition: transform 1s cubic-bezier(.3,1,.3,1);
}
.dice.rolling { transform: rotate(720deg) scale(1.05); }
.log {
  background: rgba(255,255,255,0.05);
  padding: 10px;
  border-radius: 10px;
  font-size: 13px;
  height: 150px;
  overflow-y: auto;
}
footer {
  font-size: 12px;
  text-align: center;
  color: #ccc;
  opacity: 0.8;
}
@keyframes hop {
  0%,100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -65%) scale(1.05); }
}
@media (max-width: 900px) {
  .wrapper { flex-direction: column; }
  .container-controls { border-left: none; border-top: 2px solid rgba(255,255,255,0.1); }
  .board { width: 95%; max-width: 600px; }
}
</style>
</head>
<body>

<div class="wrapper">
  <div class="container-board">
    <div class="board" id="board">
      <img src="./snakes.jpg" alt="Snakes and Ladders" id="boardImg">
      <div class="grid" id="grid"></div>
      <div class="token blue" id="blueToken">B</div>
      <div class="token red" id="redToken">R</div>
    </div>
  </div>

  <div class="container-controls">
    <div class="controls">
      <h2>ðŸŽ® Game Controls</h2>
      <div style="display:flex;gap:8px;justify-content:center;">
        <button id="vsCompBtn">1 Player vs Computer</button>
        <button id="twoPlayerBtn">2 Players</button>
      </div>
      <div id="turnText" style="text-align:center;font-weight:600;">Turn: Blue</div>
      <div id="dice" class="dice">ðŸŽ²</div>
      <button id="resetBtn">Reset Game</button>
    </div>

    <div>
      <div class="log" id="log">No moves yet...</div>
      <div style="margin-top:10px;background:rgba(255,255,255,0.05);padding:10px;border-radius:8px;">
        <strong>Support Us (M-Pesa)</strong><br>
        Till Number: <strong>4713786</strong>
      </div>
    </div>

    <footer>Snakes & Ladders Neon â€” Â© 2025</footer>
  </div>
</div>

<script>
const grid = document.getElementById("grid");
const board = document.getElementById("board");
const blueToken = document.getElementById("blueToken");
const redToken = document.getElementById("redToken");
const dice = document.getElementById("dice");
const log = document.getElementById("log");
const turnText = document.getElementById("turnText");
const vsCompBtn = document.getElementById("vsCompBtn");
const twoPlayerBtn = document.getElementById("twoPlayerBtn");
const resetBtn = document.getElementById("resetBtn");

let positions = [0,0];
let currentPlayer = 0;
let vsComputer = false;
const ladders = {3:45,8:12,14:26,21:39,31:73,59:80,90:92,83:97};
const snakes = {99:41,95:67,89:85,57:2,54:27,11:6};
const BOARD_SIZE = 10;

// Build grid
const cells = [];
for(let r=0;r<BOARD_SIZE;r++){
  for(let c=0;c<BOARD_SIZE;c++){
    const div=document.createElement("div");
    grid.appendChild(div);
    const num=(BOARD_SIZE-1-r)%2===0 ? (BOARD_SIZE-1-r)*10 + c +1 : (BOARD_SIZE-1-r)*10 + (10-c);
    div.dataset.num=num;
    cells[num]=div;
  }
}

function getCellCenter(num){
  const rect=board.getBoundingClientRect();
  const crect=cells[num].getBoundingClientRect();
  return {x:crect.left-rect.left+crect.width/2, y:crect.top-rect.top+crect.height/2};
}

function placeToken(el,num){
  const {x,y}=num>0?getCellCenter(num):{x:20,y:board.clientHeight-20};
  el.style.left=x+"px";
  el.style.top=y+"px";
}

function logMsg(msg){
  log.innerHTML+=`<div>${msg}</div>`;
  log.scrollTop=log.scrollHeight;
}

async function animatePath(player,path){
  const el=player===0?blueToken:redToken;
  for(let n of path){
    el.style.animation="hop 0.35s ease";
    const {x,y}=getCellCenter(n);
    el.style.left=x+"px";
    el.style.top=y+"px";
    await sleep(250);
    el.style.animation="";
  }
}

async function handleRoll(roll){
  const p=currentPlayer;
  let target=positions[p]+roll;
  if(target>100){ logMsg(`ðŸŽ² ${playerName(p)} rolled ${roll} but canâ€™t move.`); switchTurn(); return;}
  logMsg(`ðŸŽ² ${playerName(p)} rolled ${roll}`);
  await sleep(2000); // wait 2s before move
  const path=[];for(let s=positions[p]+1;s<=target;s++)path.push(s);
  await animatePath(p,path);
  positions[p]=target;
  if(ladders[target]){ logMsg(`ðŸªœ ${playerName(p)} climbs to ${ladders[target]}`); await animateJump(p,target,ladders[target]); positions[p]=ladders[target]; }
  else if(snakes[target]){ logMsg(`ðŸ ${playerName(p)} slides to ${snakes[target]}`); await animateJump(p,target,snakes[target]); positions[p]=snakes[target]; }
  if(positions[p]===100){ logMsg(`ðŸ† ${playerName(p)} wins!`); return; }
  switchTurn();
}

async function animateJump(player,from,to){
  const el=player===0?blueToken:redToken;
  el.style.transition="top .6s,left .6s";
  const {x,y}=getCellCenter(to);
  el.style.left=x+"px";el.style.top=y+"px";
  await sleep(600);
  el.style.transition="";
}

function playerName(i){return i===0?"Blue":"Red";}

function switchTurn(){
  currentPlayer=1-currentPlayer;
  turnText.textContent=`Turn: ${playerName(currentPlayer)}`;
  if(vsComputer && currentPlayer===1){ setTimeout(()=>dice.click(),2000); }
}

dice.addEventListener("click",async()=>{
  if(positions[0]>=100||positions[1]>=100)return;
  dice.classList.add("rolling");
  const roll=Math.floor(Math.random()*6)+1;
  await sleep(900);
  dice.textContent=roll;
  dice.classList.remove("rolling");
  await handleRoll(roll);
});

vsCompBtn.onclick=()=>{vsComputer=true;logMsg("ðŸ’» Mode: 1 Player vs Computer");};
twoPlayerBtn.onclick=()=>{vsComputer=false;logMsg("ðŸ‘¥ Mode: 2 Players");};
resetBtn.onclick=()=>location.reload();

function sleep(ms){return new Promise(r=>setTimeout(r,ms));}
window.addEventListener("resize",()=>{placeToken(blueToken,positions[0]);placeToken(redToken,positions[1]);});
placeToken(blueToken,0);placeToken(redToken,0);
</script>
</body>
</html>
